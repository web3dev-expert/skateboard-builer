import{m as A}from"./chunk-QEAETYXO.js";import{Ab as L,D as k,J as v,S as f,Tb as p,Ya as b,Yb as U,_ as u,a as m,d as g,da as d,ia as D,k as c,l as E,m as y,rb as S,s as T,wa as P,ya as _,yb as l,za as N,zb as h}from"./chunk-FCKWO5SM.js";var C=class s{ngOnInit(){localStorage.removeItem("location"),localStorage.setItem("location","not-found")}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=D({type:s,selectors:[["app-not-found"]],standalone:!0,features:[U],decls:12,vars:1,consts:[[1,"container","text-center","py-5"],[1,"row","py-5"],[1,"col-md-12","py-5"],[1,"fs-4"],[1,"d-flex","justify-content-center","align-items-end"],[1,"btn",3,"routerLink"],[1,"bi","bi-house-heart","h2","text-danger"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),p(4,"Ops..."),h(),l(5,"p",3),p(6," La pagina che stai cercando non esiste. "),h(),l(7,"div",4)(8,"p",3),p(9,"Ritorna a casa "),h(),l(10,"button",5),L(11,"i",6),h()()()()()),e&2&&(b(10),S("routerLink","/home"))},dependencies:[A],styles:["h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], *[_ngcontent-%COMP%]{font-family:Just Me Again Down Here,cursive;font-weight:400;font-style:normal}h1[_ngcontent-%COMP%]{font-size:80px}"]})};var I=class{constructor(){}loadScript(a,e,i,t=null){if(typeof document<"u"&&!document.getElementById(a)){let n=document.createElement("script");n.async=!0,n.src=e,n.onload=i,t||(t=document.head),t.appendChild(n)}}},R=class{},V={oneTapEnabled:!0},O=(()=>{class s extends I{static{this.PROVIDER_ID="GOOGLE"}constructor(e,i){super(),this.clientId=e,this.initOptions=i,this.changeUser=new _,this._socialUser=new c(null),this._accessToken=new c(null),this._receivedAccessToken=new _,this.initOptions=m(m({},V),this.initOptions),this._socialUser.pipe(f(1)).subscribe(this.changeUser),this._accessToken.pipe(f(1)).subscribe(this._receivedAccessToken)}initialize(e,i){return new Promise((t,n)=>{try{this.loadScript(s.PROVIDER_ID,this.getGoogleLoginScriptSrc(i),()=>{if(google.accounts.id.initialize({client_id:this.clientId,auto_select:e,callback:({credential:o})=>{let r=this.createSocialUser(o);this._socialUser.next(r)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled,use_fedcm_for_prompt:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe(k(o=>o===null)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){let o=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(r=>r).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:o,prompt:this.initOptions.prompt,callback:r=>{r.error?this._accessToken.error({code:r.error,description:r.error_description,uri:r.error_uri}):this._accessToken.next(r.access_token)}})}t()})}catch(o){n(o)}})}getLoginStatus(){return new Promise((e,i)=>{this._socialUser.value?e(this._socialUser.value):i(`No user is currently logged in with ${s.PROVIDER_ID}`)})}refreshToken(){return new Promise((e,i)=>{google.accounts.id.revoke(this._socialUser.value.id,t=>{t.error?i(t.error):e(this._socialUser.value)})})}getAccessToken(){return new Promise((e,i)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe(v(1)).subscribe(e)):this._socialUser.value?i("No token client was instantiated, you should specify some scopes."):i("You should be logged-in first.")})}revokeAccessToken(){return new Promise((e,i)=>{this._tokenClient?this._accessToken.value?google.accounts.oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),e()}):i("No access token to revoke"):i("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}signOut(){return g(this,null,function*(){google.accounts.id.disableAutoSelect(),this._socialUser.next(null)})}createSocialUser(e){let i=new R;i.idToken=e;let t=this.decodeJwt(e);return i.id=t.sub,i.name=t.name,i.email=t.email,i.photoUrl=t.picture,i.firstName=t.given_name,i.lastName=t.family_name,i}decodeJwt(e){let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(window.atob(t).split("").map(function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}getGoogleLoginScriptSrc(e){return e?`https://accounts.google.com/gsi/client?hl=${e}`:"https://accounts.google.com/gsi/client"}}return s})(),ne=(()=>{class s{static{this.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found"}static{this.ERR_NOT_LOGGED_IN="Not logged in"}static{this.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?"}static{this.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token"}static{this.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN="Chosen login provider is not supported for getting an access token"}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}constructor(e,i,t){this._ngZone=i,this._injector=t,this.providers=new Map,this.autoLogin=!1,this.lang="",this._user=null,this._authState=new E(1),this.initialized=!1,this._initState=new y,e instanceof Promise?e.then(n=>{this.initialize(n)}):this.initialize(e)}initialize(e){this.autoLogin=e.autoLogin!==void 0?e.autoLogin:!1,this.lang=e.lang!==void 0?e.lang:"";let{onError:i=console.error}=e;e.providers.forEach(t=>{this.providers.set(t.id,"prototype"in t.provider?this._injector.get(t.provider):t.provider)}),Promise.all(Array.from(this.providers.values()).map(t=>t.initialize(this.autoLogin,this.lang))).then(()=>{if(this.autoLogin){let t=[],n=!1;this.providers.forEach((o,r)=>{let w=o.getLoginStatus();t.push(w),w.then(z=>{this.setUser(z,r),n=!0}).catch(console.debug)}),Promise.all(t).catch(()=>{n||(this._user=null,this._authState.next(null))})}this.providers.forEach((t,n)=>{T(t.changeUser)&&t.changeUser.subscribe(o=>{this._ngZone.run(()=>{this.setUser(o,n)})})})}).catch(t=>{i(t)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}getAccessToken(e){return g(this,null,function*(){let i=this.providers.get(e);if(this.initialized)if(i){if(!(i instanceof O))throw s.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN}else throw s.ERR_LOGIN_PROVIDER_NOT_FOUND;else throw s.ERR_NOT_INITIALIZED;return yield i.getAccessToken()})}refreshAuthToken(e){return new Promise((i,t)=>{if(!this.initialized)t(s.ERR_NOT_INITIALIZED);else{let n=this.providers.get(e);n?typeof n.refreshToken!="function"?t(s.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN):n.refreshToken().then(o=>{this.setUser(o,e),i()}).catch(o=>{t(o)}):t(s.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}refreshAccessToken(e){return new Promise((i,t)=>{if(!this.initialized)t(s.ERR_NOT_INITIALIZED);else if(e!==O.PROVIDER_ID)t(s.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{let n=this.providers.get(e);n instanceof O?n.revokeAccessToken().then(i).catch(t):t(s.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}signIn(e,i){return new Promise((t,n)=>{if(!this.initialized)n(s.ERR_NOT_INITIALIZED);else{let o=this.providers.get(e);o?o.signIn(i).then(r=>{this.setUser(r,e),t(r)}).catch(r=>{n(r)}):n(s.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}signOut(e=!1){return new Promise((i,t)=>{if(!this.initialized)t(s.ERR_NOT_INITIALIZED);else if(!this._user)t(s.ERR_NOT_LOGGED_IN);else{let n=this._user.provider,o=this.providers.get(n);o?o.signOut(e).then(()=>{i(),this.setUser(null)}).catch(r=>{t(r)}):t(s.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}setUser(e,i){e&&i&&(e.provider=i),this._user=e,this._authState.next(e)}static{this.\u0275fac=function(i){return new(i||s)(d("SocialAuthServiceConfig"),d(N),d(P))}}static{this.\u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var x=class s{showSpinner=new c(!1);constructor(){}emitShowSpinner(a){this.showSpinner.next(a)}static \u0275fac=function(e){return new(e||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};export{C as a,O as b,ne as c,x as d};
